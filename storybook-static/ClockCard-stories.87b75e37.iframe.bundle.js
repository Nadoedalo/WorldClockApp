"use strict";(self.webpackChunkworld_clock=self.webpackChunkworld_clock||[]).push([[521],{"./components/ClockCard.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>ClockCard_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),esm=__webpack_require__("./node_modules/countries-and-timezones/esm/index.js"),esm_react=__webpack_require__("./node_modules/zustand/esm/react.mjs"),middleware=__webpack_require__("./node_modules/zustand/esm/middleware.mjs");const useClockStore=(0,esm_react.v)()((0,middleware.Zr)((set,get)=>({clocks:[],theme:"light",addClock:({countryCode,countryName,timezone})=>set(state=>({clocks:[...state.clocks,{id:crypto.randomUUID(),countryCode,countryName,timezone}]})),removeClock:id=>set(state=>({clocks:state.clocks.filter(c=>c.id!==id)})),updateClock:(id,patch)=>set(state=>({clocks:state.clocks.map(c=>c.id===id?{...c,...patch}:c)})),setTheme:theme=>set({theme})}),{name:"world-clock-store",storage:(0,middleware.KU)(()=>localStorage),partialize:state=>({clocks:state.clocks,theme:state.theme})}));const FlagIcon=({code,alt,className="",width=24,height=16})=>{const[error,setError]=(0,react.useState)(!1),lower=code.toLowerCase();if(error){const diameter=height;return(0,jsx_runtime.jsx)("div",{"aria-label":`${alt} code placeholder`,className:"flex items-center justify-center rounded-full bg-zinc-300 text-zinc-700 dark:bg-zinc-700 dark:text-zinc-200 font-medium select-none",style:{width:diameter,height:diameter,lineHeight:`${diameter}px`},children:(0,jsx_runtime.jsx)("span",{className:"text-[10px] leading-none",children:code.toUpperCase()})})}return(0,jsx_runtime.jsx)("img",{src:`/flags/${lower}.png`,alt,width,height,className:`object-cover rounded border border-zinc-200 dark:border-zinc-700 ${className}`,onError:()=>setError(!0)})},components_FlagIcon=FlagIcon;FlagIcon.__docgenInfo={description:"",methods:[],displayName:"FlagIcon",props:{code:{required:!0,tsType:{name:"string"},description:""},alt:{required:!0,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},width:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"24",computed:!1}},height:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"16",computed:!1}}}};const ClockCard=({item})=>{const{removeClock,updateClock}=useClockStore(),[now,setNow]=(0,react.useState)(new Date),[editingLabel,setEditingLabel]=(0,react.useState)(!1),[labelDraft,setLabelDraft]=(0,react.useState)(item.label??"");(0,react.useEffect)(()=>{const interval=setInterval(()=>setNow(new Date),1e3);return()=>clearInterval(interval)},[]),(0,react.useEffect)(()=>{setLabelDraft(item.label??"")},[item.label]);const tzList=(0,react.useMemo)(()=>{const country=esm.oj()[item.countryCode];return country?.timezones??[item.timezone]},[item.countryCode,item.timezone]),timeText=function formatTime(date,timeZone){try{return new Intl.DateTimeFormat([],{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone}).format(date)}catch{return new Intl.DateTimeFormat([],{hour:"2-digit",minute:"2-digit",hour12:!1}).format(date)}}(now,item.timezone);return(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between gap-4 rounded border border-zinc-200 dark:border-zinc-800 p-3 bg-white dark:bg-zinc-900",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-3",children:[(0,jsx_runtime.jsx)(components_FlagIcon,{code:item.countryCode,alt:item.countryName,className:"h-4 w-auto",width:24,height:16}),(0,jsx_runtime.jsxs)("div",{children:[item.label?(0,jsx_runtime.jsx)("div",{className:"text-xs text-zinc-500 mb-0.5",children:item.label}):null,(0,jsx_runtime.jsx)("div",{className:"text-sm font-medium",children:item.countryName}),(0,jsx_runtime.jsx)("div",{className:"text-xs text-zinc-500",children:item.timezone})]})]}),(0,jsx_runtime.jsx)("div",{className:"font-mono text-2xl tabular-nums",children:timeText}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[tzList.length>1&&(0,jsx_runtime.jsx)("select",{"aria-label":"Select timezone",className:"text-xs border border-zinc-300 dark:border-zinc-700 rounded px-2 py-1 bg-white dark:bg-zinc-900",value:item.timezone,onChange:e=>updateClock(item.id,{timezone:e.target.value}),children:tzList.map(tz=>(0,jsx_runtime.jsx)("option",{value:tz,children:tz},tz))}),editingLabel?(0,jsx_runtime.jsxs)("form",{onSubmit:e=>{e.preventDefault(),updateClock(item.id,{label:labelDraft||void 0}),setEditingLabel(!1)},className:"flex items-center gap-1",children:[(0,jsx_runtime.jsx)("input",{className:"text-xs border border-zinc-300 dark:border-zinc-700 rounded px-2 py-1 bg-white dark:bg-zinc-900",placeholder:"Label",value:labelDraft,onChange:e=>setLabelDraft(e.target.value)}),(0,jsx_runtime.jsx)("button",{className:"text-xs px-2 py-1 rounded bg-blue-600 text-white",type:"submit",children:"Save"})]}):(0,jsx_runtime.jsx)("button",{className:"text-xs px-2 py-1 rounded border border-zinc-300 dark:border-zinc-700",onClick:()=>setEditingLabel(!0),children:item.label?"Edit Label":"Add Label"}),(0,jsx_runtime.jsx)("button",{"aria-label":"Delete clock",className:"text-xs px-2 py-1 rounded border border-red-500 text-red-600",onClick:()=>removeClock(item.id),children:"Delete"})]})]})},components_ClockCard=ClockCard;ClockCard.__docgenInfo={description:"",methods:[],displayName:"ClockCard",props:{item:{required:!0,tsType:{name:"signature",type:"object",raw:"{\r\n  id: string;\r\n  countryCode: string; // ISO 2\r\n  countryName: string;\r\n  timezone: string; // IANA tz\r\n  label?: string;\r\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"countryCode",value:{name:"string",required:!0}},{key:"countryName",value:{name:"string",required:!0}},{key:"timezone",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!1}}]}},description:""}}};const ClockCard_stories={title:"Components/ClockCard",component:components_ClockCard},Default={args:{item:{id:"1",countryCode:"FR",countryName:"France",timezone:"Europe/Paris"}}},__namedExportsOrder=["Default"]}}]);